<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Life Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* ======= RESET ======= */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            /* Fallback if theme JS fails */
            background: radial-gradient(1200px 800px at 50% 20%, #0b1020 0%, #060609 55%, #050507 100%);
            position: fixed;
            inset: 0;
        }

        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ======= BACKGROUND LAYERS ======= */
        .bg-layer {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        .bg-base { background: var(--bg-gradient); }
        .bg-orbs { background: var(--bg-orbs); }

        /* Subtle grid: adds depth without looking busy */
        .bg-grid {
            opacity: 0.10;
            background-image:
                linear-gradient(rgba(255,255,255,0.06) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.06) 1px, transparent 1px);
            background-size: 80px 80px;
            mix-blend-mode: overlay;
        }

        .bg-noise {
            opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }

        /* ======= GLASS CONTAINER ======= */
        .container {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 52px;
            /* Glass with subtle tint so it feels integrated with the gradient */
            background: rgba(10, 10, 18, 0.52);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            box-shadow:
                0 10px 40px rgba(0, 0, 0, 0.45),
                inset 0 1px 0 rgba(255, 255, 255, 0.04);
            max-width: 98vw;
            max-height: 96vh;
            overflow: hidden;
        }

        .title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.40);
            letter-spacing: 3px;
            margin-bottom: 32px;
            text-align: center;
            text-transform: uppercase;
        }

        .calendar-grid {
            display: flex;
            flex-direction: column;
            gap: var(--row-gap, 16px);
            width: 100%;
        }

        .month-row {
            display: flex;
            align-items: center;
            gap: var(--label-gap, 20px);
            justify-content: flex-start;
            width: 100%;
        }

        .month-label {
            width: var(--label-width, 85px);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--label-font, 10px);
            font-weight: 400;
            color: rgba(255, 255, 255, 0.25);
            text-align: right;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            flex-shrink: 0;
        }

        .days-container {
            display: flex;
            gap: var(--dot-gap, 6px);
            flex-wrap: nowrap;
            align-items: center;
        }

        /* ======= DOT STYLES — CLEAN & MINIMAL ======= */
        .dot {
            width: var(--dot-size, 18px);
            height: var(--dot-size, 18px);
            border-radius: var(--dot-radius, 4px);
            position: relative;
            flex-shrink: 0;
        }

        .dot.filled {
            background: var(--dot-color);
        }

        .dot.empty {
            background: rgba(255, 255, 255, 0.025);
            border: 0.5px solid rgba(255, 255, 255, 0.035);
        }

        .dot.today {
            background: var(--today-color);
            /* Softer halo so it reads as \"today\" without neon glare */
            box-shadow:
                0 0 10px rgba(var(--today-rgb), 0.25),
                0 0 18px rgba(var(--today-rgb), 0.12);
            transform: scale(1.08);
            border-radius: calc(var(--dot-radius, 4px) + 1px);
        }

        .dot.disabled {
            background: rgba(255, 255, 255, 0.012);
            opacity: 0.35;
        }

        /* ======= PROGRESS BAR ======= */
        .progress-wrapper {
            width: 100%;
            margin-top: 28px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            width: 100%;
            max-width: 500px;
            height: 3px;
            background: rgba(255, 255, 255, 0.04);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--progress-gradient);
            border-radius: 2px;
        }

        .footer {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.22);
            letter-spacing: 1.5px;
            margin-top: 8px;
            text-align: center;
            text-transform: uppercase;
        }

        .footer span {
            color: var(--accent-color);
            font-weight: 500;
        }

        /* ======= RESPONSIVE: TABLET ======= */
        @media (max-width: 768px) {
            .container {
                padding: 22px 16px;
                border-radius: 14px;
            }
            .title {
                font-size: 10px;
                letter-spacing: 2px;
                margin-bottom: 20px;
            }
            .footer { font-size: 9px; letter-spacing: 1px; }
        }

        /* ======= RESPONSIVE: MOBILE ======= */
        @media (max-width: 480px) {
            .container {
                padding: 14px 8px;
                border-radius: 10px;
            }
            .title {
                font-size: 8px;
                margin-bottom: 14px;
                letter-spacing: 1.5px;
            }
            .progress-wrapper { margin-top: 14px; gap: 6px; }
            .progress-bar { height: 2px; }
            .footer { font-size: 7px; }
        }

        /* ======= RESPONSIVE: SMALL PHONE ======= */
        @media (max-width: 400px) {
            .container {
                padding: 10px 5px;
                border-radius: 8px;
            }
            .title {
                font-size: 7px;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body style="background: #060609 !important;">
    <div class="bg-layer bg-base"></div>
    <div class="bg-layer bg-orbs"></div>
    <div class="bg-layer bg-grid"></div>
    <div class="bg-layer bg-noise"></div>

    <div class="container">
        <h1 class="title" id="title">180 Days</h1>
        <div class="calendar-grid" id="calendarGrid"></div>
        <div class="progress-wrapper">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="footer" id="footer"></div>
        </div>
    </div>

    <script>
        // =========================================================
        // RANDOM COLOR THEME — fresh unique palette every request
        // Dark-based design with muted, sophisticated dot colors
        // Uses seeded RNG to ensure unique colors per request
        // =========================================================

        function generateTheme() {
            // Seeded random number generator (Park-Miller LCG)
            // Seed with timestamp + random offset to ensure uniqueness per request
            let seed = Date.now() + Math.random() * 1000000;
            function seededRandom() {
                seed = (seed * 16807 + 12345) % 2147483647;
                return (seed & 0x7fffffff) / 2147483647;
            }

            // HSL → RGB
            function hslToRgb(h, s, l) {
                h = ((h % 360) + 360) % 360;
                s = Math.max(0, Math.min(1, s));
                l = Math.max(0, Math.min(1, l));
                const c = (1 - Math.abs(2 * l - 1)) * s;
                const x = c * (1 - Math.abs(((h / 60) % 2) - 1));
                const m = l - c / 2;
                let r, g, b;
                if (h < 60)       { r = c; g = x; b = 0; }
                else if (h < 120) { r = x; g = c; b = 0; }
                else if (h < 180) { r = 0; g = c; b = x; }
                else if (h < 240) { r = 0; g = x; b = c; }
                else if (h < 300) { r = x; g = 0; b = c; }
                else              { r = c; g = 0; b = x; }
                return [Math.round((r+m)*255), Math.round((g+m)*255), Math.round((b+m)*255)];
            }

            function hex(r, g, b) {
                return '#' + [r, g, b].map(v => v.toString(16).padStart(2, '0')).join('');
            }

            function rn(min, max) { return min + seededRandom() * (max - min); }

            // Base hue — choose from \"eye-soothing\" dark-UI ranges (weighted)
            // Research-backed theme families commonly used in dark UIs:
            // - blue/cyan/indigo/violet (calm, readable, low fatigue)
            // - occasional rose (sparingly, for variety)
            function pickHueFromRanges() {
                const ranges = [
                    { from: 190, to: 230, w: 0.32 }, // cyan → blue
                    { from: 230, to: 270, w: 0.34 }, // indigo
                    { from: 270, to: 310, w: 0.24 }, // violet
                    { from: 140, to: 175, w: 0.06 }, // forest/teal (rare)
                    { from: 320, to: 350, w: 0.04 }, // rose (very rare)
                ];
                const r = seededRandom();
                let acc = 0;
                for (const item of ranges) {
                    acc += item.w;
                    if (r <= acc) return rn(item.from, item.to);
                }
                return rn(230, 270);
            }
            const baseHue = pickHueFromRanges();

            // Color harmony strategy
            const strategies = ['analogous', 'complementary', 'triadic', 'split', 'monochrome'];
            const strategy = strategies[Math.floor(seededRandom() * strategies.length)];

            let accentHues;
            if (strategy === 'analogous') {
                const off = rn(20, 35);
                accentHues = [baseHue, (baseHue + off) % 360, (baseHue - off + 360) % 360];
            } else if (strategy === 'complementary') {
                accentHues = [baseHue, (baseHue + 180) % 360];
            } else if (strategy === 'triadic') {
                accentHues = [baseHue, (baseHue + 120) % 360, (baseHue + 240) % 360];
            } else if (strategy === 'split') {
                accentHues = [baseHue, (baseHue + 150) % 360, (baseHue + 210) % 360];
            } else { // monochrome
                accentHues = [baseHue, (baseHue + 8) % 360, (baseHue - 8 + 360) % 360];
            }

            // Filled dot colors — muted mid-tones (NOT flashy)
            const filled = [];
            for (let i = 0; i < 4; i++) {
                const hue = accentHues[i % accentHues.length];
                const sat = rn(0.28, 0.48);
                const lit = rn(0.38, 0.52);
                const rgb = hslToRgb(hue, sat, lit);
                filled.push({ hex: hex(...rgb), rgb: rgb.join(', ') });
            }

            // Today color — moderate accent
            const todayHue = (baseHue + rn(30, 70)) % 360;
            const todayRgb = hslToRgb(todayHue, 0.58, 0.56);

            // Background gradient — still dark, but more \"obviously\" a gradient
            // (previous values were so close they looked black on many screens)
            const bgTL = hslToRgb((baseHue - rn(8, 18) + 360) % 360, rn(0.18, 0.30), rn(0.060, 0.095));
            const bgTR = hslToRgb((baseHue + rn(8, 22)) % 360, rn(0.18, 0.30), rn(0.055, 0.090));
            const bgBL = hslToRgb((baseHue + rn(18, 38)) % 360, rn(0.14, 0.24), rn(0.030, 0.060));
            const bgBR = hslToRgb((baseHue - rn(18, 38) + 360) % 360, rn(0.14, 0.24), rn(0.028, 0.055));

            // Orb colors — subtle, but present enough to feel \"premium\"
            const orb1 = hslToRgb(accentHues[0], rn(0.40, 0.55), rn(0.34, 0.44));
            const orb2 = hslToRgb(accentHues[1 % accentHues.length], rn(0.36, 0.50), rn(0.30, 0.40));

            return {
                bgGradient: `
                    radial-gradient(900px 700px at 50% 18%, rgba(${orb1}, 0.10) 0%, transparent 60%),
                    linear-gradient(135deg, rgb(${bgTL}) 0%, rgb(${bgTR}) 38%, rgb(${bgBL}) 72%, rgb(${bgBR}) 100%)
                `,
                bgOrbs: `
                    radial-gradient(ellipse 70% 52% at 18% 35%, rgba(${orb1}, 0.10) 0%, transparent 56%),
                    radial-gradient(ellipse 60% 45% at 82% 62%, rgba(${orb2}, 0.08) 0%, transparent 58%)
                `,
                filled: filled,
                today: { hex: hex(...todayRgb), rgb: todayRgb.join(', ') },
                accent: `rgba(${todayRgb.join(',')}, 0.75)`,
                progressGradient: `linear-gradient(90deg, ${filled[0].hex}, ${filled[1].hex})`,
            };
        }

        // =========================================================
        // RESPONSIVE DOT SIZING — optimized for mobile clarity
        // =========================================================

        function computeDotSizing() {
            const vw = window.innerWidth;

            let containerPad, labelWidth, labelGap, dotGap, rowGap;

            if (vw <= 400) {
                containerPad = 5 * 2;
                labelWidth = 32;
                labelGap = 3;
                dotGap = 1;
                rowGap = 6;
            } else if (vw <= 480) {
                containerPad = 8 * 2;
                labelWidth = 40;
                labelGap = 5;
                dotGap = 1;
                rowGap = 8;
            } else if (vw <= 768) {
                containerPad = 16 * 2;
                labelWidth = 60;
                labelGap = 12;
                dotGap = 3;
                rowGap = 12;
            } else {
                containerPad = 52 * 2;
                labelWidth = 85;
                labelGap = 20;
                dotGap = 6;
                rowGap = 16;
            }

            const availableForDots = vw - containerPad - labelWidth - labelGap - 6;
            const cellWidth = availableForDots / 31;
            let dotSize = Math.max(4, Math.floor(cellWidth - dotGap));
            dotSize = Math.min(dotSize, 20);
            const dotRadius = Math.max(2, Math.round(dotSize * 0.22));
            const labelFont = Math.max(6, Math.min(10, Math.round(dotSize * 0.50)));

            const root = document.documentElement;
            root.style.setProperty('--dot-size', dotSize + 'px');
            root.style.setProperty('--dot-gap', dotGap + 'px');
            root.style.setProperty('--dot-radius', dotRadius + 'px');
            root.style.setProperty('--label-width', labelWidth + 'px');
            root.style.setProperty('--label-gap', labelGap + 'px');
            root.style.setProperty('--label-font', labelFont + 'px');
            root.style.setProperty('--row-gap', rowGap + 'px');

            return { dotSize, dotGap, labelWidth };
        }

        // =========================================================
        // APPLY THEME + RENDER CALENDAR
        // =========================================================

        const theme = generateTheme();

        document.documentElement.style.setProperty('--bg-gradient', theme.bgGradient);
        document.documentElement.style.setProperty('--bg-orbs', theme.bgOrbs);
        document.documentElement.style.setProperty('--accent-color', theme.accent);
        document.documentElement.style.setProperty('--progress-gradient', theme.progressGradient);

        document.documentElement.style.background = '#060609';
        document.body.style.background = '#060609';

        computeDotSizing();

        // Calendar config (replaced by API for custom dates)
        const config = {
            yearStart: '2025-12-01',
            yearEnd: '2026-05-31',
            title: '180 DAYS'
        };

        const start = new Date(config.yearStart);
        start.setHours(0, 0, 0, 0);
        const end = new Date(config.yearEnd);
        end.setHours(23, 59, 59, 999);
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        // Build months
        const months = [];
        let dateIter = new Date(start);
        while (dateIter <= end) {
            const y = dateIter.getFullYear();
            const m = dateIter.getMonth();
            const monthStart = new Date(y, m, 1);
            const monthEnd = new Date(y, m + 1, 0);
            const clampedStart = new Date(Math.max(monthStart, start));
            clampedStart.setHours(0, 0, 0, 0);
            const clampedEnd = new Date(Math.min(monthEnd, end));
            clampedEnd.setHours(23, 59, 59, 999);

            months.push({
                year: y, month: m,
                name: monthStart.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }).toUpperCase(),
                days: monthEnd.getDate(),
                start: clampedStart, end: clampedEnd
            });
            dateIter = new Date(y, m + 1, 1);
        }

        // Progress
        const totalDays = Math.floor((end - start) / 86400000) + 1;
        const daysElapsed = Math.max(0, Math.min(totalDays, Math.floor((today - start) / 86400000) + 1));
        const daysLeft = totalDays - daysElapsed;
        const percent = Math.round((daysElapsed / totalDays) * 100);

        document.getElementById('footer').innerHTML =
            `<span>${daysLeft}</span> days left · <span>${percent}%</span> complete`;
        document.getElementById('title').textContent = config.title;
        document.getElementById('progressFill').style.width = `${percent}%`;

        // Render grid
        const grid = document.getElementById('calendarGrid');
        months.forEach(month => {
            const row = document.createElement('div');
            row.className = 'month-row';

            const label = document.createElement('div');
            label.className = 'month-label';
            label.textContent = month.name;
            row.appendChild(label);

            const days = document.createElement('div');
            days.className = 'days-container';

            for (let day = 1; day <= 31; day++) {
                const dayDate = new Date(month.year, month.month, day);
                dayDate.setHours(0, 0, 0, 0);

                if (day > month.days || dayDate < month.start || dayDate > month.end) {
                    const dot = document.createElement('div');
                    dot.className = 'dot disabled';
                    days.appendChild(dot);
                    continue;
                }

                const isFilled = dayDate <= today;
                const isToday = dayDate.getTime() === today.getTime();
                const weekGroup = Math.floor((day - 1) / 7) % 4;

                const dot = document.createElement('div');
                dot.className = `dot ${isFilled ? 'filled' : 'empty'} ${isToday ? 'today' : ''}`;

                if (isFilled && !isToday) {
                    dot.style.setProperty('--dot-color', theme.filled[weekGroup].hex);
                }

                if (isToday) {
                    dot.style.setProperty('--today-color', theme.today.hex);
                    dot.style.setProperty('--today-rgb', theme.today.rgb);
                }

                days.appendChild(dot);
            }

            row.appendChild(days);
            grid.appendChild(row);
        });
    </script>
</body>
</html>
